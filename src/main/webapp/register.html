<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>衣衣布舍女装网站</title>
    <meta name="robots" content="noindex, follow"/>
    <meta name="描述" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->


    <!-- CSS
	============================================ -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="assets/css/vendor/font.awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="assets/css/vendor/ionicons.min.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="assets/css/plugins/slick.min.css">
    <!-- Animation -->
    <link rel="stylesheet" href="assets/css/plugins/animate.min.css">
    <!-- jQuery Ui -->
    <link rel="stylesheet" href="assets/css/plugins/jquery-ui.min.css">
    <!-- Nice Select -->
    <link rel="stylesheet" href="assets/css/plugins/nice-select.min.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="assets/css/plugins/magnific-popup.css">

    <!-- Vendor & Plugins CSS (Please remove the comment from below vendor.min.css & plugins.min.css for better website load performance and remove css files from the above) -->

    <!-- <link rel="stylesheet" href="assets/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="assets/css/plugins/plugins.min.css"> -->

    <!-- Main Style CSS (Please use minify version for better website load performance) -->
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="layui/css/layui.css">


    <style>
        .login-register-wrapper .single-input-item select{
            background: #ffffff none repeat scroll 0 0;
            border: medium none rgba(0, 0, 0, 0);
            border-radius: 0;
            -webkit-box-shadow: none;
            box-shadow: none;
            color: #1B1B1C;
            font-size: 14px;
            height: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            padding-right: 10px;
            width: 100%;
        }
    </style>
    <!-- <link rel="stylesheet" href="assets/css/style.min.css"> -->
</head>

<body>

<div class="contact-wrapper">
    <header class="main-header-area">
        <div id="topiframe"></div>
        <!-- Main Header Area Start -->

        <!-- Main Header Area End -->
        <!-- Sticky Header Start Here-->

        <!-- Sticky Header End Here -->
        <!-- off-canvas menu start -->

        <!-- off-canvas menu end -->
    </header>
    <!-- Breadcrumb Area Start Here -->
    <div class="breadcrumbs-area position-relative" style="background: url('upload/banner.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center">
                    <div class="breadcrumb-content position-relative section-content">
                        <h3 class="title-3">登录-注册</h3>
                        <ul>
                            <li><a href="index.html">首页</a></li>
                            <li>登录-注册</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Breadcrumb Area End Here -->
    <!-- Login Area Start Here -->
    <div class="login-register-area mt-no-text mb-no-text" id="app">
        <div class="container container-default-2 custom-area">
            <div class="row">
                <div class="col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-custom">
                    <div class="login-register-wrapper">
                        <div class="section-content text-center mb-5">
                            <h2 class="title-4 mb-2">注册</h2>
                            <p class="desc-content">请使用下面的帐户详细信息注册。</p>
                        </div>

                        <div class="single-input-item mb-3">
                            <div class="layui-upload">
                                <div class="layui-upload-list">
                                    <input type="hidden" name="filename" id="filename" value="noimg.jpg"/>
                                    <img class="layui-upload-img" id="imgname" style="width: 10%">
                                    <p id="demoText"></p>
                                </div>
                                <button type="button" class="layui-btn" id="test1"><i class="layui-icon"></i>上传头像
                                </button>
                            </div>
                        </div>

                        <div class="single-input-item mb-3">
                            <input type="text" id="uname" v-model="uname" @blur="checkUname()" placeholder="用户名">
                        </div>
                        <div class="single-input-item mb-3">
                            <input type="password" id="upass" v-model="upass" placeholder="密码">
                        </div>

                        <div class="single-input-item mb-3">
                            <input type="text" id="tname" v-model="tname" placeholder="姓名">
                        </div>

                        <div class="single-input-item mb-3">
                            <select v-model="sex">
                                <option value="男">男</option>
                                <option value="女">女</option>
                            </select>
                        </div>

                        <div class="single-input-item mb-3">
                            <input type="text" id="birthtime" v-model="birthtime" placeholder="生日">
                        </div>

                        <div class="single-input-item mb-3">
                            <input type="text" id="tel" v-model="tel" placeholder="电话">
                        </div>

                        <div class="single-input-item mb-3">
                            <input type="text" id="email" v-model="email" placeholder="邮箱">
                        </div>



                        <div class="single-input-item mb-3">
                            <button class="btn obrien-button-2 primary-color" @click="reg()">注册</a></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Login Area End Here -->
    <!-- Support Area Start Here -->
    <div class="support-area">

    </div>
    <!-- Support Area End Here -->
    <!-- Footer Area Start Here -->
    <footer class="footer-area">
        <div class="footer-copyright-area" id="footiframe">
        </div>
    </footer>
    <!-- Footer Area End Here -->
</div>

<!-- JS
============================================ -->

<!-- jQuery JS -->
<script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
<!-- jQuery Migrate JS -->
<script src="assets/js/vendor/jQuery-migrate-3.3.0.min.js"></script>
<!-- Modernizer JS -->
<script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
<!-- Bootstrap JS -->
<script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
<!-- Slick Slider JS -->
<script src="assets/js/plugins/slick.min.js"></script>
<!-- Countdown JS -->
<script src="assets/js/plugins/jquery.countdown.min.js"></script>
<!-- Ajax JS -->
<script src="assets/js/plugins/jquery.ajaxchimp.min.js"></script>
<!-- Jquery Nice Select JS -->
<script src="assets/js/plugins/jquery.nice-select.min.js"></script>
<!-- Jquery Ui JS -->
<script src="assets/js/plugins/jquery-ui.min.js"></script>
<!-- jquery magnific popup js -->
<script src="assets/js/plugins/jquery.magnific-popup.min.js"></script>

<!-- Main JS -->
<script src="assets/js/main.js"></script>


<script type="text/javascript" src="axios/vue.js"></script>
<script type="text/javascript" src="axios/axios.min.js"></script>
<script type="text/javascript" src="axios/qs.js"></script>
<script type="text/javascript" src="axios/getUrlParams.js"></script>
<script type="text/javascript" src="layer/layer.js"></script>
<script type="text/javascript" src="laydate/laydate.js"></script>

<script type="text/javascript" src="layui/layui.js"></script>


<script type="text/javascript">

    var qs = Qs
    var vm = new Vue({
        el:"#app",
        data:{
            uname:"",
            upass:"",
            tname:"",
            sex:"男",
            birthtime:"",
            tel:"",
            email:"",
            filename:"icon1.png",

        },
        mounted(){


            this.$nextTick(function(){
                //执行一个laydate实例
                laydate.render({
                    elem: '#birthtime'
                    ,done:function(value){
                        vm.birthtime = value
                    }
                });
            })

            layui.use('upload', function(){
                var $ = layui.jquery
                    ,upload = layui.upload;

                //普通图片上传
                var uploadInst = upload.render({
                    elem: '#test1'
                    ,url: 'admin/uploadImg' //改成您自己的上传接口
                    ,done: function(res){
                        //如果上传失败
                        console.log(res)
                        vm.filename = res.data.src
                        $('#imgname').attr('src', "upload/"+res.data.src); //图片链接（base64）
                        if(res.code > 0){
                            return layer.msg('上传失败');
                        }
                        //上传成功
                    }
                });
            });
        },
        methods:{
            reg(){


                if(this.uname==""){
                    layer.msg("用户名不能为空",{icon:5})
                    this.uname=""
                    return false;
                }
                if(this.upass==""){
                    layer.msg("密码不能为空",{icon:5})
                    return false;
                }
                if(this.tname==""){
                    layer.msg("姓名不能为空",{icon:5})
                    return false;
                }
                if(this.brithtime==""){
                    layer.msg("生日不能为空",{icon:5})
                    return false;
                }
                if(!/^[1][3,4,5,7,8][0-9]{9}$/.test(this.tel)){
                    layer.msg("电话输入错误",{icon:5})
                    return false;
                }
                if(!/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(this.email)){
                    layer.msg("邮箱输入错误",{icon:5})
                    return false;
                }
                axios.post('register',qs.stringify({
                    uname:this.uname,
                    upass:this.upass,
                    tname:this.tname,
                    sex:this.sex,
                    birthtime:this.birthtime,
                    tel:this.tel,
                    filename:this.filename,
                    email:this.email,
                })).then(response =>{
                    layer.msg("注册成功",{icon:6})
                    this.uname = ""
                    this.upass=""
                    this.tname=""
                    this.tel=""
                    this.email=""
                    $("#birthtime").val("")
                }).catch(error =>{
                    console.log(error)
                })
            },


            checkUname(){
                if(this.uname==""){
                    return false;
                }
                axios.post('checkUname',qs.stringify({
                    uname:this.uname,
                })).then(response =>{
                    if(response.data.data==400){
                        layer.msg("用户已被注册，请更换",{icon:5})
                        this.uname = ""
                    }
                }).catch(error =>{
                    console.log(error)
                })
            },

            quxiao(){
                this.uname =""
                this.upass=""
                this.tname=""
                this.email=""
                $("#birthtime").val("")
            },


        }
    })


    window.onload = function () {
        $("#topiframe").load("iframe/topiframe.html")
        $("#footiframe").load("iframe/footiframe.html")
    }
</script>

</body>

</html>
