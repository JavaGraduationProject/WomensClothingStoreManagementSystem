<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>衣衣布舍女装网站</title>
    <meta name="robots" content="noindex, follow" />
    <meta name="描述" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon -->
    

    <!-- CSS
	============================================ -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="assets/css/vendor/font.awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="assets/css/vendor/ionicons.min.css">
    <!-- Slick CSS -->
    <link rel="stylesheet" href="assets/css/plugins/slick.min.css">
    <!-- Animation -->
    <link rel="stylesheet" href="assets/css/plugins/animate.min.css">
    <!-- jQuery Ui -->
    <link rel="stylesheet" href="assets/css/plugins/jquery-ui.min.css">
    <!-- Nice Select -->
    <link rel="stylesheet" href="assets/css/plugins/nice-select.min.css">
    <!-- Magnific Popup -->
    <link rel="stylesheet" href="assets/css/plugins/magnific-popup.css">

    <!-- Vendor & Plugins CSS (Please remove the comment from below vendor.min.css & plugins.min.css for better website load performance and remove css files from the above) -->

    <!-- <link rel="stylesheet" href="assets/css/vendor/vendor.min.css">
    <link rel="stylesheet" href="assets/css/plugins/plugins.min.css"> -->

    <!-- Main Style CSS (Please use minify version for better website load performance) -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- <link rel="stylesheet" href="assets/css/style.min.css"> -->
    <style>
        /*验证码*/

        .upload-awrp {
            overflow: hidden;
            margin: 120px 0;
        }

        .code {
            font-family: Arial;
            font-style: italic;
            font-size: 15px;
            border: 0;
            padding: 0px 10px 0px 10px;
            letter-spacing: 3px;
            font-weight: bolder;
            float: left;
            cursor: pointer;
            height: 40px;
            line-height: 40px;
            text-align: center;
            vertical-align: middle;
            border-left: 1px solid #DDDDDD;
            background: white;
        }
    </style>
</head>

<body>

    <div class="contact-wrapper">
        <header class="main-header-area">
            <div id="topiframe"></div>
            <!-- Main Header Area Start -->

            <!-- Main Header Area End -->
            <!-- Sticky Header Start Here-->

            <!-- Sticky Header End Here -->
            <!-- off-canvas menu start -->

            <!-- off-canvas menu end -->
        </header>
        <!-- Breadcrumb Area Start Here -->
        <div class="breadcrumbs-area position-relative" style="background: url('upload/banner.jpg')">
            <div class="container">
                <div class="row">
                    <div class="col-12 text-center">
                        <div class="breadcrumb-content position-relative section-content">
                            <h3 class="title-3">登录-注册</h3>
                            <ul>
                                <li><a href="index.html">首页</a></li>
                                <li>登录-注册</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Breadcrumb Area End Here -->
        <!-- Login Area Start Here -->
        <div class="login-register-area mt-no-text mb-no-text" id="app">
            <div class="container container-default-2 custom-area">
                <div class="row">
                    <div class="col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-custom">
                        <div class="login-register-wrapper">
                            <div class="section-content text-center mb-5">
                                <h2 class="title-4 mb-2">登录</h2>
                                <p class="desc-content">请使用下面的帐户详细信息登录。</p>
                            </div>
                                <div class="single-input-item mb-3">
                                    <input type="text" id="uname" v-model="uname" placeholder="用户名">
                                </div>
                                <div class="single-input-item mb-3">
                                    <input type="password" id="upass" v-model="upass" placeholder="密码">
                                </div>

                                <div class="single-input-item mb-3">
                                    <div style="display:flex;" >
                                        <input type="text" id="yzm" v-model="yzm" placeholder="验证码" style="width: 83%">
                                        <div id="check-code" style="overflow: hidden;">
                                            <div class="code" id="data_code"></div>
                                            <input type="hidden" value="" name="hiddenyzm" id="hiddenyzm">
                                        </div>
                                    </div>
                                </div>

                                <div class="single-input-item mb-3">
                                    <button class="btn obrien-button-2 primary-color" @click="log()">登录</a></button>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Login Area End Here -->
        <!-- Support Area Start Here -->
        <div class="support-area">

        </div>
        <!-- Support Area End Here -->
        <!-- Footer Area Start Here -->
        <footer class="footer-area">
            <div class="footer-copyright-area" id="footiframe">
            </div>
        </footer>
        <!-- Footer Area End Here -->
    </div>

    <!-- JS
============================================ -->

    <!-- jQuery JS -->
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
    <!-- jQuery Migrate JS -->
    <script src="assets/js/vendor/jQuery-migrate-3.3.0.min.js"></script>
    <!-- Modernizer JS -->
    <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="assets/js/vendor/bootstrap.bundle.min.js"></script>
    <!-- Slick Slider JS -->
    <script src="assets/js/plugins/slick.min.js"></script>
    <!-- Countdown JS -->
    <script src="assets/js/plugins/jquery.countdown.min.js"></script>
    <!-- Ajax JS -->
    <script src="assets/js/plugins/jquery.ajaxchimp.min.js"></script>
    <!-- Jquery Nice Select JS -->
    <script src="assets/js/plugins/jquery.nice-select.min.js"></script>
    <!-- Jquery Ui JS -->
    <script src="assets/js/plugins/jquery-ui.min.js"></script>
    <!-- jquery magnific popup js -->
    <script src="assets/js/plugins/jquery.magnific-popup.min.js"></script>

    <!-- Main JS -->
    <script src="assets/js/main.js"></script>


    <script type="text/javascript" src="axios/vue.js"></script>
    <script type="text/javascript" src="axios/axios.min.js"></script>
    <script type="text/javascript" src="axios/qs.js"></script>
    <script type="text/javascript" src="axios/getUrlParams.js"></script>
    <script type="text/javascript" src="layer/layer.js"></script>
    <script type="text/javascript" src="layui/layui.js"></script>



    <script type="text/javascript">

        var qs = Qs
        var vmm = new Vue({
            el:"#app",
            data:{
                uname: "",
                upass: "",
                yzm:"",
                hiddenyzm:"",
            },
            mounted(){
                this.$nextTick(function(){
                    /**
                     * 验证码
                     * @param {Object} o 验证码长度
                     */
                    $.fn.code_Obj = function(o) {
                        var _this = $(this);
                        var options = {
                            code_l: o.codeLength,//验证码长度
                            codeChars: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9,
                                'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z',
                                'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'
                            ],
                            codeColors: ['#f44336', '#009688', '#cddc39', '#03a9f4', '#9c27b0', '#5e4444', '#9ebf9f', '#ffc8c4', '#2b4754', '#b4ced9', '#835f53', '#aa677e'],
                            code_Init: function() {
                                var code = "";
                                var codeColor = "";
                                var checkCode = _this.find("#data_code");
                                for(var i = 0; i < this.code_l; i++) {
                                    var charNum = Math.floor(Math.random() * 52);
                                    code += this.codeChars[charNum];
                                }
                                for(var i = 0; i < this.codeColors.length; i++) {
                                    var charNum = Math.floor(Math.random() * 12);
                                    codeColor = this.codeColors[charNum];
                                }
                                console.log(code);
                                if(checkCode) {
                                    checkCode.css('color', codeColor);
                                    checkCode.className = "code";
                                    checkCode.text(code);
                                    checkCode.attr('data-value', code.toLowerCase());
                                    $("#hiddenyzm").attr('value', code.toLowerCase());
                                }
                            }
                        };

                        options.code_Init();//初始化验证码
                        _this.find("#data_code").bind('click', function() {
                            options.code_Init();
                        });
                    };

                    $('#check-code').code_Obj({
                        codeLength: 5
                    });
                })
            },
            methods:{
                log() {
                    this.hiddenyzm = $("#hiddenyzm").val()
                    if (this.uname == "") {
                        layer.msg("用户名不能为空", {icon: 5})
                        return false;
                    }
                    if (this.upass == "") {
                        layer.msg("密码不能为空", {icon: 5})
                        return false;
                    }
                    if (this.yzm == "") {
                        layer.msg("验证码不能为空", {icon: 5})
                        return false;
                    }

                    if (this.yzm != this.hiddenyzm) {
                        layer.msg("验证码输入错误", {icon: 5})
                        this.yzm=""
                        return false;
                    }
                    axios.post('Login', qs.stringify({
                        uname: this.uname,
                        upass: this.upass,
                        status: "正常",
                    })).then(response => {
                        if (response.data.data == 200) {
                            location.replace("index.html")
                            sessionStorage.setItem("uname",this.uname)
                        } else if (response.data.data == 400) {
                            layer.msg("用户名或密码错误", {icon: 5})
                            this.uname = ""
                            this.upass = ""
                            this.yzm = ""
                        } else {
                            layer.msg("帐号冻结", {icon: 5})
                            this.uname = ""
                            this.upass = ""
                            this.yzm = ""
                        }
                    }).catch(error => {
                        console.log(error)
                    })
                },

            }
        })


        window.onload=function(){
            $("#topiframe").load("iframe/topiframe.html")
            $("#footiframe").load("iframe/footiframe.html")
        }
    </script>

</body>

</html>
